---
- name: Prepare the Minecraft Server!
  hosts: all
  sudo: yes

  tasks:

  - name: Install openjdk-7-jdk
    apt: pkg=openjdk-7-jre state=installed update_cache=true
    
  - name: Install screen
    apt: name=screen state=present
    
  - name: Install git
    apt: name=git state=present
    
  - name: Install fail2ban
    apt: name=fail2ban state=present
  
  - name: Copy jail.conf jail.local
    copy: src=/etc/fail2ban/jail.conf dest=/etc/fail2ban/jail.local owner=root group=root mode=0644

  - name: Update fail2ban policy
    replace: dest=/etc/fail2ban/fail2ban.conf regex='bantime = 600' replace='bantime = 7200'
